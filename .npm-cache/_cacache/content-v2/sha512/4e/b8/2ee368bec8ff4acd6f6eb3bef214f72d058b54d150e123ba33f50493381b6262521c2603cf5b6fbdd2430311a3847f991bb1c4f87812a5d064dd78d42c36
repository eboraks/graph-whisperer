{"_id":"promise-the-world","_rev":"2-8a2ec9551d4ad61e99d530720a76acfa","name":"promise-the-world","dist-tags":{"latest":"1.0.1"},"versions":{"1.0.0":{"name":"promise-the-world","version":"1.0.0","description":"A complete Promise utils collection","main":"index.js","scripts":{"coverage":"codecov","test":"standard && nyc --reporter=lcov mocha"},"author":{"name":"Thomas Bergwinkl","email":"bergi@axolotlfarm.org","url":"https://www.bergnet.org/people/bergi/card#me"},"license":"MIT","repository":{"type":"git","url":"git://github.com/bergos/promise-the-world.git"},"bugs":{"url":"https://github.com/bergos/promise-the-world/issues"},"homepage":"https://github.com/bergos/promise-the-world","dependencies":{},"devDependencies":{"codecov":"^3.6.1","mocha":"^7.0.0","nyc":"^15.0.0","standard":"^14.3.1"},"gitHead":"546171e01ab3c07a4deb9185a552f744ae1b9012","_id":"promise-the-world@1.0.0","_npmVersion":"6.4.1","_nodeVersion":"10.12.0","_npmUser":{"name":"bergos","email":"bergi@bergnet.org"},"dist":{"integrity":"sha512-hjsaQmSMs8HYGa82oXhFCD4t8X3+2ltYxRBuFtcdgmjLnV6FTl5rz5VGBtdjVxkXh+CbTd/8FxYikmH/i42QBg==","shasum":"72cffb2eab4c689ea72dec3cd27da9aba728ed42","tarball":"https://registry.npmjs.org/promise-the-world/-/promise-the-world-1.0.0.tgz","fileCount":13,"unpackedSize":15132,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJeHlouCRA9TVsSAnZWagAAqvkP/3HGL3/P349tqlsdw18y\n4YQyPWF+rxzKP5wamAlCe/RROgHTsTIBv2LowHIs/2hP8uze4ntkRIfxix6Q\nfhfYLLpgTQafCOjyGWyEO+zHx7b8Q043d74LWR6D7szS6DkQn4OdFiG6nKex\n2B5hV2zKvYBb4wsHn4Ix9DLg8ibrMR2XG8rB3dk+ZXAXPALm1EL14kcVEWiQ\n3g7nFk19v1rRL2F6nIOBTo04MLCl12sbUyw3zOAph9eemfT9MnWezmFG5jkX\nJd2U5FN8Ux0XFh0dC6rwS1GQxqKuaJTot1SBhJ2NnUmYCJN/o9vG38ztWJqc\n52KQZEj3tMLu8zTLRQ3S4wOtphToT4l9oVf+XTRmdI2Az5jmH3GNtQyOsvUU\n0I/viTA7xsWCZe+8fGlIbvk77YL45JJSQZhOOBh6qGNSJ975FMkR0CVQLG8W\n7P9vgIVXkd7IYKBao0HeGVjakD3NO5rnrNw/ozzbUKBxm+4ZCAOJLM1tQ7Gw\n09DEtJpT3CnC2PuZby8cqOowuxXCmkZNszN4LWaaZXGRCJndSu0ONt3a4nFi\nqxqwWMhj4puXl1jILiQvYl3gilb6YZUgVlIDXtPLCNT1ZhmbIsfPthbLg8JF\nagHDRRHrjpBgeKDfbtff6H3smLM1/qZAmAbrcPk/qo48IhzgWiIlu0XzJUD5\n1Dw7\r\n=I90h\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIHjwm/lLYHynSNLBIDtycTob8Iyz0nQDuNsAOL7n+uRHAiEA7EH+/FkqOe7jfDqBH/+ECYKAmHq4nfNqV0j68Wv7kgY="}]},"maintainers":[{"name":"bergos","email":"bergi@bergnet.org"}],"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/promise-the-world_1.0.0_1579047469617_0.26767712857125203"},"_hasShrinkwrap":false},"1.0.1":{"name":"promise-the-world","version":"1.0.1","description":"A complete Promise utils collection","main":"index.js","scripts":{"coverage":"codecov","test":"standard && nyc --reporter=lcov mocha"},"author":{"name":"Thomas Bergwinkl","email":"bergi@axolotlfarm.org","url":"https://www.bergnet.org/people/bergi/card#me"},"license":"MIT","repository":{"type":"git","url":"git://github.com/bergos/promise-the-world.git"},"bugs":{"url":"https://github.com/bergos/promise-the-world/issues"},"homepage":"https://github.com/bergos/promise-the-world","dependencies":{},"devDependencies":{"codecov":"^3.6.1","mocha":"^7.0.0","nyc":"^15.0.0","standard":"^14.3.1"},"gitHead":"3e6cb977ce4bedd49de40651d23b17193153e821","_id":"promise-the-world@1.0.1","_nodeVersion":"12.13.0","_npmVersion":"6.12.0","_npmUser":{"name":"bergos","email":"bergi@bergnet.org"},"dist":{"integrity":"sha512-eAXctcYU0ksq9YT5LT0N3e8yvdEAp0aYuzIiaJo9CpZwga45i08MW05GMXZIow7N05d1o4EBoR5hjkb7jhzqKg==","shasum":"63e2b7c05948e3bc12434267c8a20b4a8fab774d","tarball":"https://registry.npmjs.org/promise-the-world/-/promise-the-world-1.0.1.tgz","fileCount":13,"unpackedSize":15700,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJedpO1CRA9TVsSAnZWagAAoUYP/3tA9EGGn+TyyphTNY1U\nYx5R03MfnQtO4FE510U7qjr+6nEG/h3nYxGhJKAe4uQ9fyscQ2GxRFdi71NS\nzYxiNi+4T7ol6duS2S9f0CSoTxBq0nLaKhFMdShcMK3aaP6EhAx2R5jhjf5A\nm0O5Q6SVXVq7/XjKGuNZwGljiK1DHy8Q2OCic04Pn6y4Atoh2hzMVv42iNK+\nPZW8hLu11oFsLIkTNDInBwC7q0Fktx9Z31rZLJIgJSorPinoi1arEHfF/86L\n5y7B38oeEKagMwUQ3vO16K2wKNARxzjvl38EGIutnj+bQqQhBbLiXO/sszsN\n9BSnWFXOL95RCim3dPwdhe5SgjWorr54UK9afvKimyM38pPE9RRBbk86CkgW\n5XC9Kjq/MVZR1bLlrcqE4OffgYy3qcZ1XmvKabpjVWIWbEXrvroT7xaKfG/2\nJdL1aiU2EjUz8DRquhg5l7Ncx5Y7fA0gVoqOYaNlUZNKFYdHjyIaO6mHwYAu\n48wtojm1YGvidbLUj3JqZt4uipdJ9gASdmfsSz35Xn5gG8Iq/JvwywxJVAT+\nqOK03b+zRHTB2xO/iu5WzFoX9xf5G0NV5FQQhTT+6PhGq7AJW8lE1KDWBiVO\nIiTwWJL80lLnj0DxxB0FT9MMbATzenMYjKOyudeJN/FQsXHShWZHXQO1d83U\nJXon\r\n=E2Jn\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCjjYkCXLMMmgWczGnvqWc36l7zYKOUHQk4y54i2O+b4wIhAILvnyVss1cHMwlLDYusMiX+qSXsGIeamYFznQYP40S3"}]},"maintainers":[{"name":"bergos","email":"bergi@bergnet.org"}],"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/promise-the-world_1.0.1_1584829364837_0.37258832012059284"},"_hasShrinkwrap":false}},"time":{"created":"2020-01-15T00:17:49.616Z","1.0.0":"2020-01-15T00:17:49.747Z","modified":"2022-05-13T12:37:09.367Z","1.0.1":"2020-03-21T22:22:44.989Z"},"maintainers":[{"name":"bergos","email":"bergi@bergnet.org"}],"description":"A complete Promise utils collection","homepage":"https://github.com/bergos/promise-the-world","repository":{"type":"git","url":"git://github.com/bergos/promise-the-world.git"},"author":{"name":"Thomas Bergwinkl","email":"bergi@axolotlfarm.org","url":"https://www.bergnet.org/people/bergi/card#me"},"bugs":{"url":"https://github.com/bergos/promise-the-world/issues"},"license":"MIT","readme":"# promise-the-world\n\nA collection of utils to handle recurring patterns around Promises and `async`/`await` code.\n\n## Usage\n\nThe individual functions can be imported using the path `promise-the-world/` + component name.\nFor the `defer` function it would look like this: \n\n```javascript\nconst defer = require('promise-the-world/defer')\n```\n\nIt's also possible to load the functions using the destructuring syntax.\nUsing the path to the individual components is recommended to reduce the bundle sizes.\nImporting the components with the destructuring syntax would look like this:\n\n```javascript\nconst { defer } = require('promise-the-world')\n```\n\n### defer()\n\nImplements the obsolete [Promise.defer()](https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Deferred) method which returns a `Deferred` object.\nIn most cases, the Promise constructor is sufficient to create a Promise.\n`defer` can be used for the rare cases where `resolve()` or `reject()` must be called outside the `executor` callback of the Promise constructor.\nThe returned `Deferred` object has the following properties/methods:\n\n- `resolve(value)`: Resolves the Promise with the given value.\n- `reject(error)`: Rejects the Promise with the given error.\n- `promise`: The Promise object\n\nThe following example uses `defer` to wrap the `close` event of a stream into a Promise: \n\n```javascript\nconst fs = require('fs')\nconst defer = require('promise-the-world/defer')\n\nconst closed = defer()\nconst stream = fs.createReadStream('README.md')\n\nstream.once('close', closed.resolve)\nstream.resume()\n\nclosed.promise.then(() => {\n  console.log('closed')\n})\n```\n\n### delay(time)\n\nReturns a Promise that resolves after the given `time` in milliseconds.\n\nThe following example code simply waits for 1s. \n\n```javascript\nconst delay = require('promise-the-world/delay')\n\ndelay(1000).then(() => {\n  console.log('1s later')\n})\n```\n\n### mutex()\n\nReturns a mutex/lock object.\nA mutex is useful to limit or sync access to a resource.\nAccess can be requested with the `lock` method which will resolve immediately if the mutex is not locked.\nIn the case that the mutex is locked, the `lock` method will resolve after `unlock` was called.\nThe returned mutex object has the following methods:\n\n- `lock()`: Request access to the mutex.\n  Returns a Promise which will resolve when the mutex is not / no longer locked.  \n- `unlock`: Unlocks a locked mutex.\n\nThe following example wraps `fetch` and uses a mutex to do only one request at a time:\n\n```javascript\nconst mutex = require('promise-the-world/mutex')\n\nconst access = mutex()\n\nasync function limitedFetch (url) {\n  await access.lock()\n\n  try {\n    const result = await fetch(url)\n\n    access.unlock()\n\n    return result\n  } catch (err) {\n    // make sure you unlock the mutex if an error was thrown!\n    access.unlock()\n\n    throw err\n  }\n}\n\nPromise.all([\n  limitedFetch('http://example.org/'),\n  limitedFetch('http://example.com/')\n])\n```\n\n### queue(maxPending, maxQueued)\n \nReturns a queue object to handle Promises in sequence.\nWith the `maxPending` option, it's possible to limit the items handled in parallel.\nThat can be useful for cases where resources are limited or expensive.\nThe Promises must be wrapped in factory function to give the queue control over the time when the items should be started. \n\n- `maxPending`: The limit for the pending Promises.\n  The value is copied from the constructor argument.\n  The default value is `1`. \n- `maxQueued`: The limit of queued factories.\n  If the limit is reached, `.add()` will throw an error.\n  The default value is `Infinity` \n- `.add(factory)`: Adds a Promise wrapped in a factory to the queue.\n  Returns a Promise which acts as a proxy for the actual Promise.   \n- `.length`: The number of queue factories.\n- `.pending`: The number of pending Promises.\n\nThe following example uses a queue to limit the number of parallel fetch request to a maximum of 2:\n\n```javascript\nconst queue = require('promise-the-world/queue')\n\nconst fetchQueue = queue(2)\n\nPromise.all([\n  fetchQueue.add(() => fetch('http://example.org/1')),\n  fetchQueue.add(() => fetch('http://example.org/2')),\n  fetchQueue.add(() => fetch('http://example.org/3')),\n  fetchQueue.add(() => fetch('http://example.org/4'))\n])\n```\n","readmeFilename":"README.md"}